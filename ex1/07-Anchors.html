<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ancres</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        .color{
            color: crimson;
        }
        .hover{
            background: #e5e5e5;
        }
        body,html{
            scroll-behavior: smooth;
        }
    </style>
    
</head>
<body>
    <h1>Exercice 07</h1>  
    <div class="content">
        
        <h2>Hello <strong>All</strong> World</h2>
        <p>
            Lorem ipsum dolor sit amet,consectetur adipiscing elit. Duis ac feugiat diam. Vestibulum eu sapien sed augue sodales interdum. Morbi mi odio, facilisis maximus maximus eget, luctus ut risus. <strong>Phasellus elementum</strong> neque nec efficitur finibus. Donec porta fermentum lorem. Nulla sed aliquam eros. Pellentesque vehicula mollis velit, nec tincidunt magna ullamcorper eget. Quisque nec sollicitudin nunc.
        </p>
        <h2>Chocolat</h2>
        <p>
            Aliquam vitae tempus turpis, rhoncus lacinia tellus. Nunc venenatis, arcu et congue porttitor, ante tellus venenatis tellus, vel commodo dolor mi et massa. <strong>Donec maximus</strong> nisl sed sapien volutpat mollis. Quisque ac nisl consectetur felis faucibus hendrerit at at libero. Praesent nibh elit, varius eget ipsum id, aliquet consequat sapien. Suspendisse quis fringilla sem, sit amet dapibus velit. Aenean et hendrerit neque. Proin nec nisi mi.
        </p>
        <h2>Magasin</h2>
        <p>
            Lorem ipsum dolor sit amet,consectetur adipiscing elit. Duis ac feugiat diam. Vestibulum eu sapien sed augue sodales interdum. Morbi mi odio, facilisis maximus maximus eget, luctus ut risus. <strong>Phasellus elementum</strong> neque nec efficitur finibus. Donec porta fermentum lorem. Nulla sed aliquam eros. Pellentesque vehicula mollis velit, nec tincidunt magna ullamcorper eget. Quisque nec sollicitudin nunc.
        </p>
        <h2>Contact</h2>
        <p>
            Aliquam vitae tempus turpis, rhoncus lacinia tellus. Nunc venenatis, arcu et congue porttitor, ante tellus venenatis tellus, vel commodo dolor mi et massa. <strong>Donec maximus</strong> nisl sed sapien volutpat mollis. Quisque ac nisl consectetur felis faucibus hendrerit at at libero. Praesent nibh elit, varius eget ipsum id, aliquet consequat sapien. Suspendisse quis fringilla sem, sit amet dapibus velit. Aenean et hendrerit neque. Proin nec nisi mi.
        </p>
        <h2>Chien</h2>
        <p>
            Lorem ipsum dolor sit amet,consectetur adipiscing elit. Duis ac feugiat diam. Vestibulum eu sapien sed augue sodales interdum. Morbi mi odio, facilisis maximus maximus eget, luctus ut risus. <strong>Phasellus elementum</strong> neque nec efficitur finibus. Donec porta fermentum lorem. Nulla sed aliquam eros. Pellentesque vehicula mollis velit, nec tincidunt magna ullamcorper eget. Quisque nec sollicitudin nunc.
        </p>
        <h2>Chat</h2>
        <p>
            Aliquam vitae tempus turpis, rhoncus lacinia tellus. Nunc venenatis, arcu et congue porttitor, ante tellus venenatis tellus, vel commodo dolor mi et massa. <strong>Donec maximus</strong> nisl sed sapien volutpat mollis. Quisque ac nisl consectetur felis faucibus hendrerit at at libero. Praesent nibh elit, varius eget ipsum id, aliquet consequat sapien. Suspendisse quis fringilla sem, sit amet dapibus velit. Aenean et hendrerit neque. Proin nec nisi mi.
        </p>
        <h2>Poulet</h2>
        <p>
            Aliquam vitae tempus turpis, rhoncus lacinia tellus. Nunc venenatis, arcu et congue porttitor, ante tellus venenatis tellus, vel commodo dolor mi et massa. <strong>Donec maximus</strong> nisl sed sapien volutpat mollis. Quisque ac nisl consectetur felis faucibus hendrerit at at libero. Praesent nibh elit, varius eget ipsum id, aliquet consequat sapien. Suspendisse quis fringilla sem, sit amet dapibus velit. Aenean et hendrerit neque. Proin nec nisi mi.
        </p>
        <h2>Citron</h2>
        <p>
            Aliquam vitae tempus turpis, rhoncus lacinia tellus. Nunc venenatis, arcu et congue porttitor, ante tellus venenatis tellus, vel commodo dolor mi et massa. <strong>Donec maximus</strong> nisl sed sapien volutpat mollis. Quisque ac nisl consectetur felis faucibus hendrerit at at libero. Praesent nibh elit, varius eget ipsum id, aliquet consequat sapien. Suspendisse quis fringilla sem, sit amet dapibus velit. Aenean et hendrerit neque. Proin nec nisi mi.
        </p>
        <h2>Culture</h2>
        <p>
            Aliquam vitae tempus turpis, rhoncus lacinia tellus. Nunc venenatis, arcu et congue porttitor, ante tellus venenatis tellus, vel commodo dolor mi et massa. <strong>Donec maximus</strong> nisl sed sapien volutpat mollis. Quisque ac nisl consectetur felis faucibus hendrerit at at libero. Praesent nibh elit, varius eget ipsum id, aliquet consequat sapien. Suspendisse quis fringilla sem, sit amet dapibus velit. Aenean et hendrerit neque. Proin nec nisi mi.
        </p>
        <h2>Coût total</h2>
        <p>
            Aliquam vitae tempus turpis, rhoncus lacinia tellus. Nunc venenatis, arcu et congue porttitor, ante tellus venenatis tellus, vel commodo dolor mi et massa. <strong>Donec maximus</strong> nisl sed sapien volutpat mollis. Quisque ac nisl consectetur felis faucibus hendrerit at at libero. Praesent nibh elit, varius eget ipsum id, aliquet consequat sapien. Suspendisse quis fringilla sem, sit amet dapibus velit. Aenean et hendrerit neque. Proin nec nisi mi.
        </p>   
    </div>
    
    
    <script type="text/javascript">
        
    //------------------------------------------BOUTONS ANCRES----------------------------------------------

        //Ajouter les content, body et créer la div qui aura la classe "anchors"
        const content = document.querySelector('.content'); 
        const anchorsMenu = document.createElement('div');
        anchorsMenu.classList.add('anchors'); 
        const body = document.querySelector('body');
        
        //Ajouter dans le body, avant la div ".content", "anchorsMenu"
        body.insertBefore(anchorsMenu, content);
        
        //Créer le menu à partir des titres h2
        const titles = document.querySelectorAll('h2');
        const menu = document.querySelector('.anchors');
        
        titles.forEach(title => {
            //On créer des spans pour chaque titre auquel on ajoute la classe anchorStyle
            const anchor = document.createElement('span');
            anchor.classList.add('anchorStyle');
            anchor.innerHTML = title.innerHTML;
            menu.appendChild(anchor);
            
            //Gérer le click, si on clique -> On scroll vers le h2 correspondant
            anchor.addEventListener('click', () =>{
                // console.log('Je rentre dans le click');
                window.scrollTo({
                    top: title.offsetTop,
                    behavior:'smooth'
                });
            });    

            //Hover lorsqu'on passe la souris sur les boutons (gérer quand la souris part aussi)
            anchor.addEventListener('mousemove', () =>{
                anchor.style.backgroundColor = "purple";
                anchor.style.transition = "background-color 0.7s ease";
            });

            anchor.addEventListener('mouseout', () =>{
                anchor.style.backgroundColor = "crimson";
                anchor.style.transition = "background-color 0.7s ease";
            });
        }); 
        
        //Grâce à la classe ajoutée anchorStyle à chaque élément, gérer la css (on pourrait ajouter directement dans la boucle titles.forEach)
        document.querySelectorAll(".anchorStyle").forEach(anchor => {
            anchor.style.display="inline-block"; 
            anchor.style.padding="10px 10px"; 
            anchor.style.border = "1px solid black";
            anchor.style.backgroundColor = "crimson";
            anchor.style.color = "white";
            anchor.style.textDecoration="none";
            anchor.style.cursor="pointer"; 
            anchor.style.margin = "5px";
            anchor.style.borderRadius = "5px";
        }); 

        //------------------------------------------BOUTON TOP----------------------------------------------

        //Créer la div du bouton scrollUp
        const scrollUp = document.createElement('div');
        //Ajouter la classe scrollUp
        scrollUp.classList.add('scrollUp');
        //L'injecter dans le body
        document.body.appendChild(scrollUp);
        
        // Gérer le style CSS par défaut du scrollUp (doit être caché) et avec image !!
        scrollUp.style.position = "fixed";
        scrollUp.style.bottom = "10px";
        scrollUp.style.right = "10px"; 
        scrollUp.style.color = "white"; 
        scrollUp.style.backgroundColor = "crimson";
        scrollUp.style.backgroundImage="url('../images/chevron-up.svg')";
        scrollUp.style.backgroundPosition="center"; 
        scrollUp.style.backgroundRepeat="no-repeat";
        scrollUp.style.padding = "20px";
        scrollUp.style.border = "1px solid black";
        scrollUp.style.cursor = "pointer"; 
        scrollUp.style.borderRadius = "5px";


        //Créer une fonction pour gérer le scrollUp
        const scroll = (elem) => {
            if (window.scrollY > 50) { //Afficher le bouton lorsque l'utilisateur a fait défiler 50 pixels ou +
                scrollUp.style.display = "block";
            } else {
                scrollUp.style.display = "none"; // Cacher le bouton s'il est en haut de la page
            }
        }

        //Si on scroll de 50px -> affichage du bouton
        window.addEventListener('scroll', () => {
            scroll(); //Appel de la fonction scroll
        });

        //Si on vient de refresh la page et qu'on est en haut -> pas de bouton, si on est en bas -> bouton visible
        scroll(); 

        // Ajouter un événement de clic pour faire défiler jusqu'en haut de la page
        scrollUp.addEventListener('click', () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
});
</script>
</body>
</html>